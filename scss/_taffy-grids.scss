@mixin taffy-grids($name, $gutter-width, $gutter-height, $amount, $media: null) {
  %#{dash('grid' $name 'all' $media)} {
    margin-top: em($gutter-height);
    margin-right: em($gutter-width);
  }

  %#{dash('grid' $name 'first' 'row' $media)} {
    margin-top: 0;
  }

  %#{dash('grid' $name 'last' 'column' $media)} {
    margin-right: 0;
  }

  @for $i from 1 through $amount {
    %#{dash('grid' $name $media $i)} {
      > [class^='column'] {
        &:nth-child(n) {
          @extend %#{dash('grid' $name 'all' $media)};
        }

        &:nth-child(-n + #{$i}) {
          @extend %#{dash('grid' $name 'first' 'row' $media)};
        }

        &:nth-child(#{$i}n),
        &:last-child {
          @extend %#{dash('grid' $name 'last' 'column' $media)};
        }
      }
    }
  }
}
