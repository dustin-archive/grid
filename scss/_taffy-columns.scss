@mixin taffy-columns($name, $gutter, $amount, $break: null) {
  @for $i from 2 through $amount {
    $column: '(100% - #{em($gutter * ($i - 1))}) / #{$i}';
    $offset: '#{$column} + #{em($gutter)}';

    %#{dash(column $name $break $i)} {
      flex: 1 1 calc(#{$column});

      @if $taffy-product-grid {
        max-width: calc(#{$column});
      }
    }

    %#{dash(offset $name 'left' $break $i)} {
      margin-left: calc(#{$offset});
    }

    %#{dash(offset $name 'right' $break $i)} {
      margin-right: calc(#{$offset});
    }
  }

  // Largest column and offset
  %#{dash(column $name $break 1)} {
    flex: 1 1 100%;
  }

  %#{dash(offset $name 'left' $break 1)} {
    margin-left: 100%;
  }

  %#{dash(offset $name 'right' $break 1)} {
    margin-right: 100%;
  }

  // Zero column and offset
  %#{dash(column $name $break 0)} {
    flex: 1 1 0;
  }

  %#{dash(offset $name 'left' $break 0)} {
    margin-left: 0;
  }

  %#{dash(offset $name 'right' $break 0)} {
    margin-right: 0;
  }
}
