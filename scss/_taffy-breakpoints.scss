$taffy-breakpoints: (); // Set global scope

@mixin breakpoint($breakpoint) {
  @media (min-width: em(map-get($taffy-breakpoints, $breakpoint))) {
    @content;
  }
}

@mixin taffy-breakpoints($name, $gutter-width, $gutter-height, $amount) {
  @for $i from 1 through $amount {
    $breakpoint: (dash($name $i): ($taffy-page-max / $amount) * $i);
    $taffy-breakpoints: map-merge($taffy-breakpoints, $breakpoint) !global; // Update global scope

    @include breakpoint(dash($name $i)) {
      @include taffy-grids($name, $gutter-width, $gutter-height, $amount, $i);
      @include taffy-columns($name, $gutter-width, $gutter-height, $amount, $i);
    }
  }
}
